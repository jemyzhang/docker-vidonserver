<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Images</title>
<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
<link rel="stylesheet" href="css/jquery.mCustomScrollbar.css">
<link rel="stylesheet" type="text/css" href="css/global.css">
</head>
<body>
<form method="post">
  <div class="containter">
    <div class="header addhtml" id="header" url="template/header.html"> 
    </div>
    <div class="siderbar addhtml" id="siderbar" url="template/siderbar.html">
      
    </div>
    
    <div class="content2">
      <div class="movie">
        <div class="posterMenu">
          <div  class="posterMenubtn">
            <div id="dropdown2" class="dropdown all"> <a href="javascript:;" class="input_dropdown" title="全部"><b class="font">全部</b><span></span></a>
              <ul class="fillet10">
                <li>全部</li>
                <li>最近添加</li>
              </ul>
            </div>
            <a title="刷新" href="javascript:;" class="fresh"  id="fresh"> 
            <!--<span class="loadbtn"></span>
      		<span class="loading"></span>
      		<span class="noload"></span>--> 
            </a> </div>
          <p>电影(<span class="movieNum">16</span>部)</p>
        </div>
        <div class="posterList">
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/1.jpg" /> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/2.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/3.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/4.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/5.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/6.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/7.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/8.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/9.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/10.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/11.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  alt="Name Name Name Name Name Name"  title="Name Name Name Name Name Name" src="images/12.jpg"/> </div>
              <p class="imgname" title="Name Name Name Name Name Name">Name Name Name Name Name Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/13.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/14.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/11.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/12.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/13.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/14.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/11.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/12.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/13.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/14.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/15.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/16.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/17.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
          <div class="box">
            <div class="pic">
              <div class="img fillet10">
                <div class="imgbg"></div>
                <img class="fillet10"  src="images/18.jpg"/> </div>
              <p class="imgname">Name</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="clr"></div>
    <div class="movieTips">
      <p>服务器正在扫描您的电影路径，已发现电影<span class="movieNum">3</span>个</p>
    </div>
  </div>
</form>

<div class="tckuang addNoPlay fillet10 addhtml" url="template/popaddnoplay.html"> </div>
<div class="tckuang addVideo fillet10 addhtml" url="template/popaddvideo.html"> </div>
<div class="tckuang  addPath fillet10 addhtml" url="template/popaddpath.html"></div>
<div class="tckuang addNetwork fillet10 addhtml"  url="template/popaddnetwork.html"> </div>
<div class="tckuang confirmDelete fillet10 addhtml" url="template/popconfirmdelete.html"></div>
<div class="tckuang poplogin fillet10 addhtml" url="template/poplogin.html"> </div>
<div class="tckuang popabout fillet10 addhtml" url="template/popabout.html"></div>
<script src="js/jquery.mCustomScrollbar.concat.min.js"></script> 
<script type="text/javascript" src="js/global.js"></script> 
<script type="text/javascript">
	$(function(){
		//侧边栏当前项选中
		$("#siderbar dd").eq(2).addClass("selected");
		//已经添加的路径隔行换色，删除路径
		$('#selectedPath li:even').addClass("even");
		$("#selectedPath").delegate('.delete',"click",function(){
				showdiv(".confirmDelete",3);
				$("#deletePath").text($(this).parent().find(".showpath").text());
				//$(this).parent().remove();
				
		})
		$("#selectedPath").delegate('li',"hover",function(){
				 $(this).toggleClass("hover");
		})
		
		$(".addNwPath").click(function(){
				showdiv(".addNetwork",4);
				
			})
		$("#header .login").click(function(){
				showdiv(".poplogin",1);
				
			})
		$(".movie .posterList .img,.teleplaydetails .posterList .img").click(function(){
			showdiv(".addNoPlay",1);
			})
		$("#fresh").click(function(){
			  if(!$(this).hasClass("loading")){
				  $(this).addClass("loading");
				  console.log("开始刷新");
				  //刷新完成清删除loading样式
				  }
			  else{
				  $(this).removeClass("loading");
				  console.log("停止刷新");
				  }
			  })
		
		var isno=false;
		//测试用变量
		var data='<div class="box">'+
        '<div class="pic">'+
          '<div class="img fillet10"><div class="imgbg"></div> <img class="fillet10"  src="images/17.jpg"/> </div>'+
          '<p class="imgname">Name</p>'+
        '</div>'+
      '</div>';
	  //IE7
		$(".posterList").scroll(function(){
    		console.log("scroll....")
    		if(!isno) {
    		 	 var scrollTop=$(".posterList").scrollTop();
				 var docHeight=$(".posterList").get(0).scrollHeight;
	    		 var winHeight=$(window).height()-80;
	    		 if(scrollTop+winHeight>=docHeight){
	    		 	 isno=true;
					 alert('请求新数据...');//IE7兼容用
			 		// for(var i=0;i<20;i++){
					//$(".posterList").append(src);
					
					//}
			         isno=false; 	         
	    		 }  
	        } 		 	
    		   		 
    	})
		//IE7++
		$(".posterList").mCustomScrollbar({
          scrollButtons:{enable:true},
          theme:"light-3",
          callbacks:{  
             onTotalScroll:function(){
                //console.log('滚动到底部啦！')
				//alert("aa");
				//for(var i=0;i<20;i++){
					$(".posterList .mCSB_container").append(data);
					
					//}

             },
             onTotalScrollOffset:50,
             whileScrollingInterval:10
          }
          
        });
		//添加模拟滚动条
		$("#selectedPath").mCustomScrollbar({
		  autoHideScrollbar:true,
        });
		$(".addPath .popDisk").mCustomScrollbar({
          //scrollButtons:{enable:true},
		  autoHideScrollbar:true,
        });
		$(".addPath .popFolder").mCustomScrollbar({
          //scrollButtons:{enable:true},
		  autoHideScrollbar:true,
        });
		
		
	})	

	</script>
</body>
</html>